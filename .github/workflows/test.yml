name: Auto comment on Push

on: 
  push: 
    branches:
      - main
  pull_request: 
    branches: ["main"]

jobs:
  comment_on_commit:
    runs-on: ubuntu-latest

    env:
      DEFAULT_COMMENT: "Default Analysis: This is default comment --> Hey"
      json_data: '{"componet": "hello", "value":true, "project_name":"scrapper_project"}'

    steps:
      - name: Post Comment on latest commit
        run: | 
          COMMENT_URL="https://api.github.com/repos/${{ github.repository }}/commits/${{ github.sha }}/comments"

          curl -L -X POST \
            -H "Authorization: Bearer ${{ secrets.GITHUB_TOKEN }}" \
            -H "Content-Type: application/json" \
            -d "{\"body\": \"${json_data}\"}" \
            "$COMMENT_URL"
